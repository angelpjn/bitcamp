# 자바에서 값 표현(literal)하기 - 부동소수점 메모리 저장

## 관련 파일

```
Test11_9.java, Test11_10.java
```

## 부동소수점의 메모리 저장 

```
1) 메모리 비트 저장을 위한 전제 조건

   - 2진수로 표현 가능해야 함
     -> 메모리 비트는 전기 on/off 즉, 1과 0으로 저장하기 때문
     -> 음성, 화면, 촉각, 미각 등의 메모리 저장을 위해서는 
        2진수 표현 要
   - 정규화(nomalized) : 부동소수점의 2진수 변환
   - IEEE-754 : 부동소수점의 2진수 표현 법칙 정의 문서

2) IEEE-754

   - 부동소수점을 32비트와 64비트로 표현하는 법에 대한 정의
   - single-precision : 단정도(=정밀도1) 부동소수점의 32비트 
     표현

   - double-precision : 배정도(=정밀도2) 부동소수점의 64비트 
     표현

3) 부동소수점의 2진수 표현

   - 단정도 : 32비트 float 타입
     [부호비트(1)][지수부(8)][가수부(23)]

   - 배정도 : 64비트 double 타입
     [부호비트(1)][지수부(11)][가수부(52)]

   - 각 영역별 정의
     · 부호비트(sign bit)
       : 음수 : 1 , 양수 : 0

     · 지수(exponent)
       : 127bias 사용. 2의 지수 값에 127을 더한 결과 값
         -> Excess-K
         cf. e2 = 10^2 / e-2 = 10^(-2)

     · 가수(fraction/mantissa)
       : sign-magnitude 방식 저장
         1.xxxx 값에서 소수점 왼쪽 1을 제외한 나머지 수 저장
         가수부의 남은 비트는 0으로 변환하여 저장

4) 12.375(10진수)의 정규화

   - 정수 부분 12의 2진수 변환
     => 1100

   - 소수 부분 0.375의 2진수 변환
     · 0.375 * 2 = 0.75   -> 0
     · 0.750 * 2 = 1.50   -> 1
     · 0.500 * 2 = 1.00   -> 1
     => 011

     => 12.375 ----2진수 변환----> 1100.011

   - 가장 좌측의 1을 제외한 나머지를 가수로 표현
     => 1.100011 * 2^3

   - 지수부 3을 Excess-K방식으로 변환
     · 3 + 127 = 130 ---2진수 변환--->10000010

  ==> [0] [10000010] [10001100000000000000000]
  ==> 0100 0001 0100 0110 0000 0000 0000 0000
```

### 부동소수점 유의 사항

```
1) 가수부분이 딱 떨어지기 위해서는 끝자리가 항상 5여야 함

   ex. 12.375
       · 0.375 * 2 = 0.75   -> 0
       · 0.750 * 2 = 1.50   -> 1
       · 0.500 * 2 = 1.00   -> 1

2) 부동소수의 가수 부분이 무한 반복되는 수가 대부분
   => 가수부의 크기만큼 저장하고 나머지는 버림
      System.out.println(12.117);
      => 12.117

3) 계산 결과가 이상하게 출력되는 예

   System.out.println(214500/1.1);
   => 194999.99999999997
   => 개박자의 값 보정 코드가 필요
```

## 부동소수점의 크기

```
1) 32비트 단정도 메모리

   - 소수점을 제외한 7자리의 수 저장 가능
     -> 유효 자릿 수 : 7자리
  
   - 단정도 부동소수점 : 값 뒤 f 또는 F

     ex. float 숫자 예
        System.out.println(9876567f); // 7자리
        => 9876567.0
        System.out.println(98765678f); // 8자리
        => 9.876568E7       
        System.out.println(9876.567f); // 7자리
        => 9876.567     
        System.out.println(9876.5678f); // 8자리
        => 9876.567

2) 64비트 배정도 메모리
  
    - 소수점을 제외한 15자리의 수 저장 가능
      -> 유효 자릿 수 : 15자리

    - 단정도 대비 두 배 정도의 정밀한 값 저장 가능

    - 값 뒤에 아무 것도 붙지 않음
      즉, 부동소수점 사용 시 배정도 값 표현 권장

      ex. double 숫자 예
        System.out.println(98765678); // 8자리
        => 98765678
        System.out.println(9876.5678); // 8자리
        => 9876.5678
```